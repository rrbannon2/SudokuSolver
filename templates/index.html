<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sudoku Solver</title>

    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">

    <style type="text/css">
        html,
        body {
            background-color: #FAFAFA
        }

        table {
            border: 2px solid #000000;
        }

        td {
            border: 1px solid #000000;
            text-align: center;
            vertical-align: middle;
        }
        td:first-child {
            border-left: solid;
        }

        td:nth-child(3n) {
            border-right: solid;
        }

        tr:first-child {
            border-top: solid;
        }

        tr:nth-child(3n) td {
            border-bottom: solid;
        }
        input {
            color: #000000;
            padding: 0;
            border: 0;
            text-align: center;
            width: 48px;
            height: 48px;
            font-size: 24px;
            background-color: #FFFFFF;
            outline: none;
        }

        input:disabled {
            background-color: #EEEEEE;
        }

        
    </style>
</head>

<body>
    <div class="container">

        <h1>Enter Sudoku Puzzle Below</h1>

        <form id="sudokuForm" action="/solve" method="POST">
        <table id="grid">

            <tr>
                <td><input id="1,1" type="text"></td>
                <td><input id="1,2" type="text"></td>
                <td><input id="1,3" type="text"></td>

                <td><input id="1,4" type="text"></td>
                <td><input id="1,5" type="text"></td>
                <td><input id="1,6" type="text"></td>

                <td><input id="1,7" type="text"></td>
                <td><input id="1,8" type="text"></td>
                <td><input id="1,9" type="text"></td>
            </tr>

            <tr>
                <td><input id="2,1" type="text"></td>
                <td><input id="2,2" type="text"></td>
                <td><input id="2,3" type="text"></td>

                <td><input id="2,4" type="text"></td>
                <td><input id="2,5" type="text"></td>
                <td><input id="2,6" type="text"></td>

                <td><input id="2,7" type="text"></td>
                <td><input id="2,8" type="text"></td>
                <td><input id="2,9" type="text"></td>
            </tr>

            <tr>
                <td><input id="3,1" type="text"></td>
                <td><input id="3,2" type="text"></td>
                <td><input id="3,3" type="text"></td>

                <td><input id="3,4" type="text"></td>
                <td><input id="3,5" type="text"></td>
                <td><input id="3,6" type="text"></td>

                <td><input id="3,7" type="text"></td>
                <td><input id="3,8" type="text"></td>
                <td><input id="3,9" type="text"></td>
            </tr>

            <tr>
                <td><input id="4,1" type="text"></td>
                <td><input id="4,2" type="text"></td>
                <td><input id="4,3" type="text"></td>

                <td><input id="4,4" type="text"></td>
                <td><input id="4,5" type="text"></td>
                <td><input id="4,6" type="text"></td>

                <td><input id="4,7" type="text"></td>
                <td><input id="4,8" type="text"></td>
                <td><input id="4,9" type="text"></td>
            </tr>

            <tr>
                <td><input id="5,1" type="text"></td>
                <td><input id="5,2" type="text"></td>
                <td><input id="5,3" type="text"></td>

                <td><input id="5,4" type="text"></td>
                <td><input id="5,5" type="text"></td>
                <td><input id="5,6" type="text"></td>

                <td><input id="5,7" type="text"></td>
                <td><input id="5,8" type="text"></td>
                <td><input id="5,9" type="text"></td>
            </tr>

            <tr>
                <td><input id="6,1" type="text"></td>
                <td><input id="6,2" type="text"></td>
                <td><input id="6,3" type="text"></td>

                <td><input id="6,4" type="text"></td>
                <td><input id="6,5" type="text"></td>
                <td><input id="6,6" type="text"></td>

                <td><input id="6,7" type="text"></td>
                <td><input id="6,8" type="text"></td>
                <td><input id="6,9" type="text"></td>
            </tr>

            <tr>
                <td><input id="7,1" type="text"></td>
                <td><input id="7,2" type="text"></td>
                <td><input id="7,3" type="text"></td>

                <td><input id="7,4" type="text"></td>
                <td><input id="7,5" type="text"></td>
                <td><input id="7,6" type="text"></td>

                <td><input id="7,7" type="text"></td>
                <td><input id="7,8" type="text"></td>
                <td><input id="7,9" type="text"></td>
            </tr>

            <tr>
                <td><input id="8,1" type="text"></td>
                <td><input id="8,2" type="text"></td>
                <td><input id="8,3" type="text"></td>

                <td><input id="8,4" type="text"></td>
                <td><input id="8,5" type="text"></td>
                <td><input id="8,6" type="text"></td>

                <td><input id="8,7" type="text"></td>
                <td><input id="8,8" type="text"></td>
                <td><input id="8,9" type="text"></td>
            </tr>

            <tr>
                <td><input id="9,1" type="text"></td>
                <td><input id="9,2" type="text"></td>
                <td><input id="9,3" type="text"></td>

                <td><input id="9,4" type="text"></td>
                <td><input id="9,5" type="text"></td>
                <td><input id="9,6" type="text"></td>

                <td><input id="9,7" type="text"></td>
                <td><input id="9,8" type="text"></td>
                <td><input id="9,9" type="text"></td>
            </tr>

        </table>
        <br />
        <button type="submit">Solve</button>
        <button type="reset">Reset</button>
    </form>
    </div>
</body>

<script>
    document.getElementById('sudokuForm').addEventListener('submit', function(event) {
        event.preventDefault(); // Prevent the form from submitting normally
        var inputCells = ['1,1','1,2','1,3','1,4','1,5','1,6','1,7','1,8','1,9','2,1','2,2','2,3','2,4','2,5','2,6','2,7','2,8','2,9','3,1','3,2','3,3','3,4','3,5','3,6','3,7','3,8','3,9','4,1','4,2','4,3','4,4','4,5','4,6','4,7','4,8','4,9','5,1','5,2','5,3','5,4','5,5','5,6','5,7','5,8','5,9','6,1','6,2','6,3','6,4','6,5','6,6','6,7','6,8','6,9','7,1','7,2','7,3','7,4','7,5','7,6','7,7','7,8','7,9','8,1','8,2','8,3','8,4','8,5','8,6','8,7','8,8','8,9','9,1','9,2','9,3','9,4','9,5','9,6','9,7','9,8','9,9'];
        var jsonDict = {};

        for (i in inputCells) {
            var cellNum = document.getElementById(inputCells[i]);
            if(cellNum.value != ''){
                jsonDict[inputCells[i]] = cellNum.value;
            };

            
        };

        // Send the JSON object to the Flask backend
        fetch('/solve', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(jsonDict),
        })
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            
            return response.json();
            
        })
        .then(data => {
            // Handle the response from the Flask server
            displaySolution(data);
            // Perform actions based on the response
        })
        .catch(error => {
            console.error('There was a problem with the fetch operation:', error);
            // Handle errors here
        });
    });

function displaySolution(data){
    var cells = ['1,1','1,2','1,3','1,4','1,5','1,6','1,7','1,8','1,9','2,1','2,2','2,3','2,4','2,5','2,6','2,7','2,8','2,9','3,1','3,2','3,3','3,4','3,5','3,6','3,7','3,8','3,9','4,1','4,2','4,3','4,4','4,5','4,6','4,7','4,8','4,9','5,1','5,2','5,3','5,4','5,5','5,6','5,7','5,8','5,9','6,1','6,2','6,3','6,4','6,5','6,6','6,7','6,8','6,9','7,1','7,2','7,3','7,4','7,5','7,6','7,7','7,8','7,9','8,1','8,2','8,3','8,4','8,5','8,6','8,7','8,8','8,9','9,1','9,2','9,3','9,4','9,5','9,6','9,7','9,8','9,9'];
    for (i in cells) {
        document.getElementById(cells[i]).value = data[cells[i]];
    };
};
</script>

</html>
